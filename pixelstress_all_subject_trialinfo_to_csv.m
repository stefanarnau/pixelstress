clear all;

% PATH VARS
PATH_EEGLAB = '/home/plkn/eeglab2023.1/';
PATH_AUTOCLEANED = '/mnt/data_dump/pixelstress/2_autocleaned/';
PATH_BEHAVIOR = '/mnt/data_dump/pixelstress/3_behavior/';

% The subject list
subject_list = {'2_2',...
                '7_2',...
                '8_2',...
                '9_1',...
                '10_1',...
                '11_2',...
                '12_2',...
                '14_1',...
                '15_2',...
                '16_2',...
                '17_1',...
                '19_1',...
                '20_2',...
                '21_1',...
                '22_2',...
                '23_1',...
                '24_2',...
                '25_1',...
                '26_1',...
                '27_2',...
                '28_1',...
                '29_2',...
                '30_1',...
                '31_2',...
                '32_1',...
                '33_2',...
                '34_2',...
                '35_1',...
                '36_1',...
                '37_2',...
                '38_1',...
                '39_2',...
               };

% Init eeglab
addpath(PATH_EEGLAB);
eeglab;

% Loop subjects and collect trialinfo tf trials
data = [];
for s = 1 : length(subject_list)
    EEG = pop_loadset('filename', ['vp_', subject_list{s}(1 : end - 2), '_cleaned_tf.set'], 'filepath', PATH_AUTOCLEANED, 'loadmode', 'info');
    if s == 1
        data = EEG.trialinfo;
    else
        data = [data; EEG.trialinfo];
    end
end
writetable(data, [PATH_BEHAVIOR, 'behavior_all_tf.csv'], 'Delimiter', ',');

% Loop subjects and collect trialinfo erp trials
data = [];
for s = 1 : length(subject_list)
    EEG = pop_loadset('filename', ['vp_', subject_list{s}(1 : end - 2), '_cleaned_erp.set'], 'filepath', PATH_AUTOCLEANED, 'loadmode', 'info');
    if s == 1
        data = EEG.trialinfo;
    else
        data = [data; EEG.trialinfo];
    end
end
writetable(data, [PATH_BEHAVIOR, 'behavior_all_erp.csv'], 'Delimiter', ',');

